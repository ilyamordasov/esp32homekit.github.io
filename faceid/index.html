<html>
  <head>
    <script src="//console.re/connector.js" data-channel="im-faceid" data-server="OPTIONAL-PRIVATE-SERVER-URL" id="consolerescript"></script>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>

  </head>
  <body>
    <input style="width: 100%; height:100px;" type="submit" id="MyButton">
    <div style="width: 100%;height: 100%;" id="res"></div>
    <script>
    	async function webauthnCheck() {
			if (await PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable()) {
            	console.re.log("PublicKeyCredential is available");
				document.getElementById('MyButton').onclick = async function(event){
					event.preventDefault();
					const options = {
						publicKey: {
							rp: {
								name: 'ilyamordasov.github.io'
							},
							user: {
								id: Uint8Array.from("XXXXXX", c => c.charCodeAt(0)),
								name: 'test',
								displayName: 'Test User'
							},
							challenge: Uint8Array.from('XXXXXX', c => c.charCodeAt(0)),
							pubKeyCredParams: [
								{
									type: 'public-key',
									alg: -7
								}
							],
							authenticatorSelection: {
								authenticatorAttachment: "platform",
								requireResidentKey: true,
								userVerification: "required"
							},
							attestation: "none",
							timeout: 15000
						}
					}
					navigator.credentials.create(options.publicKey).then(function (publicKeyCredential) {
						console.re.log(publicKeyCredential);
						document.getElementById('res').innerHTML = JSON.stringify(publicKeyCredential);
					});
				}
			}
		}
		webauthnCheck();
    </script>
  </body>
</html>
